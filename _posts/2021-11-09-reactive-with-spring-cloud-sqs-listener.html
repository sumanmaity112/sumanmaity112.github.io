---
layout: post
title: Reactive with Spring Cloud SQS Listener
canonical_url: https://medium.com/@suman.maity112/reactive-with-spring-cloud-sqs-listener-3081c79b5972?source=rss-92eeb3145de9------2
tag:
- manual-acknowledgement
- sqs-listener
- spring-cloud
- webflux
- reactive
---

<figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*4uVkHMYkMdayK1tF1bhY7Q.png" /><figcaption>image source: <a href="https://static.packt-cdn.com/products/9781789137613/graphics/25cb54f3-2b2c-4806-9b21-c87bdb2b8d3b.png">https://static.packt-cdn.com/products/9781789137613/graphics/25cb54f3-2b2c-4806-9b21-c87bdb2b8d3b.png</a></figcaption></figure><p>As part of this article letâ€™s try to understand how can we integrate Spring cloud <a href="https://github.com/spring-cloud/spring-cloud-aws/blob/main/spring-cloud-aws-messaging/src/main/java/org/springframework/cloud/aws/messaging/listener/annotation/SqsListener.java">@SqsListener</a> with <a href="https://spring.io/reactive">Reactive Spring</a>. But before we start on actual topic letâ€™s try to understand what is this Reactive Spring and what are the benefits.</p><h3>Reactive Spring</h3><p>As per official documentation</p><blockquote>Reactive systems have certain characteristics that make them ideal for low-latency, high-throughput workloads. Project Reactor and the Spring portfolio work together to enable developers to build enterprise-grade reactive systems that are responsive, resilient, elastic, and message-driven.</blockquote><p>Reactive Spring (Project Reactor) is a non-blocking foundation with in-built back pressure enabled framework which enables developer to build non-blocking application. Reactive system better utilizes modern hardwares, ensuring better resilience between decoupled components.</p><h4>Benefits for ReactiveÂ Spring</h4><p>Many of you might already have understood the benefits of reactive spring, but just to be on same page, letâ€™s list down the benefitsÂ â€”</p><ul><li>Non-blocking</li><li>Better throughput/performance</li><li>Better utilization ofÂ hardware</li><li>Declarative programming approach</li></ul><h3>SQS Listener</h3><p>Now that we understood what is Reactive Spring, letâ€™s try to understand what is the usage of @SqsListerner.</p><p>In <a href="https://www.oreilly.com/library/view/software-architecture-patterns/9781491971437/ch02.html">Event Driven Architecture</a>, we can make use of @SqsListener to receive messages from Queue and do the required processing. Many of us write something similar to the following code to receive a message from SQS and delete it from SQS once successfully processed.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*HczAFYfK93ljP4Gi5bFZOQ.png" /></figure><p>But here the issue is that we are usingÂ <strong>.block()</strong>, because of this operator code will perform like a normal <strong>blocking </strong>codebase. If this happens, there is no real benefit of the Reactive framework. So, how can we use the full potential of the reactive approach? ðŸ¤”</p><h4>Manual Acknowledgement</h4><p>To utilize full potential of reactive, we have to make a couple of changes in our codebase.</p><p>First, add or update your SQS config with following configuration,</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*2RBANyDPnM-DdgiXykqQpA.png" /></figure><p>Once you are done with config modification, change the above <strong>receiveMessage</strong> method something like the following,</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*aY2VxPSmCOiEOX4ccsWoxQ.png" /></figure><p>Now, as you can see in this example we are using theÂ <strong>.subscribe()</strong> operator, which is a non-blocking operator, i.e. we achieved fully reactive code with @SqsListener.</p><p>PS: I hope youâ€™ve enjoyed it, and if youâ€™ve found it useful, please feel free to share with others or leave a comment ðŸ˜ƒ. Incase you want check the entire file, you can check itÂ <a href="https://gist.github.com/sumanmaity112/2b57985a57c7b3f86dad90b590c66d8e">here</a>.</p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=3081c79b5972" width="1" height="1" alt="">
<p>Originally posted on <a href="https://medium.com/@suman.maity112/reactive-with-spring-cloud-sqs-listener-3081c79b5972?source=rss-92eeb3145de9------2">medium.com</a>.</p>
