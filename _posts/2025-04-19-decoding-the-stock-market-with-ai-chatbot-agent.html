---
layout: post
title: Decoding the Stock Market with AI Chatbot Agent
canonical_url: https://medium.com/@suman.maity112/decoding-the-stock-market-with-ai-chatbot-agent-9a8230f23f96?source=rss-92eeb3145de9------2
tag:
- finance
- ai-chatbot
- kaggle
- gemini
- stock-market
---

<figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*ttIAn_ABf3URZhNnK7w1LQ.jpeg" /></figure><blockquote>Read for free <a href="https://sumanmaity112.github.io/posts/decoding-the-stock-market-with-ai-chatbot-agent">here</a>.</blockquote><p>Have you ever felt lost in the stock market? Or wished you could ask someone (or something) to make sense of all the financial jargon and its vast data? You are not alone; I am one of you. To simplify my life, I started working on combining two of my interests — finance and conversational AI. My aim is simple: build an AI chatbot that I can ask questions in plain English, and it does all the analysis and gives results in an easy-to-understand form. The current chatbot, StockWise, is in the very early phase, but I’m excited to share what I have learnt and how things are coming together.</p><h4><strong>The Challenge: Making Sense of Market Madness</strong></h4><p>The stock market can feel overwhelming; there is continuous new information, from real-time prices to complex financial reports. This creates some of the major challenges —</p><ul><li><strong>Information Overload: </strong>There is just so much data; it&#39;s very hard to know where to even start.</li><li><strong>Jargon Jungle:</strong> Financial terms are like a secret language that does not make sense to most people.</li><li><strong>Analysis Anxiety: </strong>Traditional stock market analysis requires many professional tools and knowledge. Most of the time, these tools aren’t even present on a single platform. Due to which most of the investors aren’t able to use the right tool or waste too much time to consolidate all.</li></ul><p>I want to build a tool that can break down all these barriers so that anyone can use it and make sense of the stock market, irrespective of their background and knowledge. That’s where the AI Chatbot Agent comes into the picture, which can streamline all the processes related to the market and make it easy to grasp for everyone.</p><h4><strong>What is an AI agent?</strong></h4><p>Before we proceed further, let’s quickly understand what an “AI agent” is. You can think of them as an AI system that goes beyond simply answering questions. They can take actions, make decisions, and interact with other systems to achieve specific goals. In my case, the goal is to navigate the stock market. It is done by following:</p><ul><li><strong>Understand requests: </strong>Ask questions in simple, plain English, and the agent will figure out what we are looking for.</li><li><strong>Gather information: </strong>Once it understands the requests, based on need, it can access different data sources, including local and external data sources, to gather all the required information.</li><li><strong>Analyse and Explain:</strong> Once all the required pieces of information are available to it, it does not just give raw data; it analyses all that information and explains it in easy-to-understand language.</li></ul><h4><strong>How My AI Chatbot Agent Works: A Peek Under the Hood</strong></h4><p>My AI Chatbot Agent, StockWise, combines multiple technologies and concepts to achieve its goal —</p><ul><li><strong>Retrieval Augmented Generation (RAG):</strong> At its core, the agent uses RAG architecture. This means it doesn’t just rely on its existing knowledge; it actively retrieves relevant information to provide the most accurate and up-to-date answers. It’s like having a super-smart research assistant built in! It fetches information from local and external data sources, combines it with the question and uses a powerful large language model (LLM) to generate a clear and helpful response.</li><li><strong>Gemini:</strong> This is the brain, the core reasoning engine of the agent. It’s a large language model (LLM) that can understand the questions, figure out what information is needed and how to get that required information, and generate an easy-to-understand response.</li><li><strong>LangGraph:</strong> This is the framework that helps me to design the agent’s conversation flow. It makes sure that the agent can follow along, remember what’s already been asked and help the LLM to provide the correct answer that makes sense in that context. At the core, it uses the state machine concept in a graph structure. It uses nodes to represent specific actions (like chatbot response, user input, executing different tools, etc.), and edges represent the flow of control based on conversation state.</li></ul><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*jzSXWnXLN9ZmYaLq9uzupg.png" /></figure><h4><strong>Key Capabilities of the AI Agent: Custom Tools Integration</strong></h4><p>To make this agent, StockWise, truly useful, I have integrated it with several tools. These tools are specialised Python functions/methods that the agent can use to perform several tasks —</p><ul><li><strong>Database Interaction: </strong>In the current agent, I am making use of a simple SQLite database to store historical stock data. This database acts like a simple cache to reduce reliance on external API/datasource and speed up retrieval for previously fetched data. The agent uses different tools like list_tables, describe_table, execute_query etc., to interact with the database. A database integration tool can be very easy to implement, for example —</li></ul><pre>from langchain_core.tools import tool<br><br>@tool<br>def execute_query(sql: str) -&gt; List[List[Any]]:<br>    &quot;&quot;&quot;Executes an SQL query and returns the results.&quot;&quot;&quot;<br><br>    print(f&#39; - DB CALL: execute_query({sql})&#39;)<br>    conn = connect_db()<br>    try:<br>        cursor = conn.cursor()<br>        cursor.execute(sql)<br>        conn.commit()<br>        return cursor.fetchall()<br>    except sqlite3.Error as e:<br>        print(f&quot;Error executing query: {e}&quot;)<br>        return []<br>    finally:<br>        if conn:<br>            conn.close()</pre><ul><li><strong>External Data Retrieval:</strong> To fetch historical data, the agent needs to make use of an external API using tools like fetch_bse_historical_data. Here I am using the API from <a href="https://www.alphavantage.co/">Alpha Vantage</a>, but feel free to use any other external data source.</li><li><strong>News Summarisation:</strong> The agent needs to have the latest news about the mentioned company, so it uses fetch_news_summary tool. Here, the tool is not just a simple Python function; it uses Gemini, the LLM, to fetch all the latest developing news and summarise the same. You can easily implement it, which proves that a custom tool doesn’t need to be just a simple Python function; it can be anything —</li></ul><pre>from langchain_google_genai import ChatGoogleGenerativeAI<br>from google.genai import types<br>from google import genai<br><br>client = client = genai.Client(api_key=GOOGLE_API_KEY)<br><br>config_with_search = types.GenerateContentConfig(<br>    tools=[types.Tool(google_search=types.GoogleSearch())],<br>    temperature=0.0,<br>)<br><br>@tool<br>def fetch_news_summary(company_name: str) -&gt; str:<br>    &quot;&quot;&quot;<br>    Uses Gemini to search for and summarize news about a given company.<br><br>    Args:<br>        company_name: The name of the company (e.g., &quot;Reliance Industries&quot;).<br><br>    Returns:<br>        A string containing a summary of the latest news for the given company.<br>        Returns an error message if news retrieval fails.<br><br>    Raises:<br>        Exception: If any error occurs during the Gemini API call.<br>    &quot;&quot;&quot;<br><br>    print(f&#39; - Tool CALL: fetch_news_summary for {company_name}&#39;)<br><br>    try:<br>        response = client.models.generate_content(<br>            model=&#39;gemini-2.0-flash&#39;,<br>            contents=f&quot;&quot;&quot;You are StockWise, a helpful and knowledgeable chatbot that provides stock analysis and recommendations for the Bombay Stock Exchange (BSE).<br>                          Please provide a summary of the following, based on the latest news for {company_name}:<br>                              * Key events impacting the stock price<br>                              * Changes in analyst ratings<br>                              * Significant company announcements<br>                          &quot;&quot;&quot;,<br>            config=config_with_search,<br>        )<br><br>        response_content = &quot;&quot;<br>        if response and response.candidates and response.candidates[0].content.parts:<br>            for part in response.candidates[0].content.parts:<br>                if part.text:<br>                    response_content += part.text<br>            return response_content<br>        else:<br>            return f&quot;Could not retrieve news summary for {company_name}&quot;<br><br>    except Exception as e:<br>        error_message = f&quot;Error retrieving news summary for {company_name}: {str(e)}&quot;<br>        return error_message</pre><h4><strong>Keeping the Conversation Going: Maintaining Context</strong></h4><p>LangGraph’s state management capabilities are crucial for creating a natural and intuitive conversational experience. They help agents to remember the context of the conversation. This means if we ask about a specific stock, the agent will remember it, and we don’t need to mention the same information again and again, which makes conversation much smoother and natural.</p><p>In my case, I am using a simple TypedDict to maintain conversation state across different steps —</p><pre>from typing import Annotated, List, Dict, Any, Optional<br>from typing_extensions import TypedDict<br>from langgraph.graph.message import add_messages<br><br># --- State Definition ---<br>class StockAnalysisState(TypedDict):<br>    &quot;&quot;&quot;<br>    Represents the state of the stock analysis conversation.<br>    &quot;&quot;&quot;<br>    messages: Annotated[list, add_messages]<br>    finished: Optional[bool]<br>    api_outputs: Dict[str, List[Dict[str, Any]]] | None</pre><h4><strong>Crafting the Agent’s Personality: Prompt Engineering</strong></h4><p>I’ve also spent quite some time crafting the agent’s “persona” through prompt engineering. This involves carefully providing specific instructions to tune its behaviours, communication style, creativity, and other aspects. You can imagine it like training a puppy or a human baby.</p><p>For example, the system prompts instruct the agent to —</p><ul><li>Behave as a “helpful and knowledgeable chatbot”</li><li>Provide “stock analysis and recommendations”</li><li>Focus on the “Bombay Stock Exchange (BSE)”</li></ul><p>These careful prompt engineering helps the chatbot agent to communicate effectively and only focus on information related to the specific goal, instead of running its thoughts across and deviating from the actual task at hand.</p><h4><strong>Why This Chatbot Agent Matters: The Real-World Impact</strong></h4><p>I believe this AI Chatbot Agent, StockWise, can make real-life difference for investors in several ways —</p><ul><li><strong>Democratising Access: </strong>By simplifying complex financial information, it lowers the barriers for, but is not limited to, new and part-time investors and helps everyone to participate in the stock market with better confidence.</li><li><strong>Unlocking Efficiency:</strong> Investors can quickly gather information and make informed decisions without wasting time juggling between multiple platforms and mountains of raw data, which overall saves valuable time and effort.</li><li><strong>Fueling Smarter Decisions: </strong>Contextual insights and clear explanations help investors to truly understand the data, which leads to better-informed decisions.</li><li><strong>Personalised Financial Advisory:</strong> It can analyse and recommend stocks based on personal risk tolerance, investment goals, and financial circumstances.</li><li><strong>Scalable Growth: </strong>The modular architecture of the system allows seamless expansions to cover global markets and different investment segments.</li></ul><h4><strong>The Journey Ahead: A Glimpse into the Future</strong></h4><p>I’m very excited about the journey ahead with StockWise. There are uncapped possibilities, and I see it evolving in several key directions —</p><ul><li><strong>Global Market Expansion:</strong> Even though the current agent implementation focuses on the <a href="https://www.bseindia.com/">Bombay Stock Exchange (BSE)</a>, it can be very easily extended to global markets like <a href="https://www.nyse.com/index">NYSE</a>, <a href="https://www.nasdaq.com/">NASDAQ</a>, <a href="https://www.euronext.com">Euronext</a> etc. This would help investors to have better knowledge across markets.</li><li><strong>Multi-Asset Class Analysis: </strong>Beyond stocks, it can be easily extended to analyse other assets, including Bonds, ETFs, Mutual Funds, commodities, and even cryptocurrencies. This would make it a truly versatile tool for portfolio management.</li><li><strong>Integrate real-time data:</strong> Current implementation uses historical data (till last market date) to analyse and recommend; in the future, it can be easily integrated with a real-time data feed to have real-time analysis.</li><li><strong>Enhanced Predictive Capabilities:</strong> In the long term, it can grow towards better predictive analysis, thus improving its recommendations and more accurate forecasts. This would require careful consideration of ethical implications and potential biases.</li></ul><p>These are just the tip of the iceberg; here the limit is our imagination.</p><h4>Conclusion</h4><p>Building this AI chatbot agent, StockWise, is just more than a simple hobby project; it can help individuals to take control of their future finances. By combining the power of AI with a conversational approach, I believe we can easily lower the financial background barriers for everyone, democratise access to financial information, and create a more informed and confident investing community. The journey is ongoing, and I’m eager to find out what lies in the future.</p><p>You can find the working Chatbot Agent on <a href="https://www.kaggle.com/code/sumanmaity112/stockwise-stock-analysis-chatbot-agent">Kaggle</a>.</p><p>P.S: Feel free to reach out to me if you have any questions or feedback 😄.</p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=9a8230f23f96" width="1" height="1" alt="">
