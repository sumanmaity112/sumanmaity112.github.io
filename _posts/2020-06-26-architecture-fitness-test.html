---
layout: post
title: Architecture Fitness Test
canonical_url: https://medium.com/@suman.maity112/architecture-fitness-test-6f64d9a266c?source=rss-92eeb3145de9------2
---

<figure><img alt="" src="https://cdn-images-1.medium.com/max/827/1*-0Z2DW6_BqOXWnx1y7NHtQ.png" /></figure><p>As part of this article letâ€™s try to understand what is <strong>Architecture Fitness Test</strong> and why do we even needÂ it.</p><p><strong>Architecture Fitness Test</strong> is a test which validates architecture design over a period of time. It can be manual or an automated process.</p><p><strong>Why do we even have to test our architecture?</strong></p><p>Testing the architecture will help many developers to know the entire architecture story, which was written by some of the experienced developers and came up with nice architecture diagrams.These architecture diagrams shows the system components and their interactions. But when project gets bigger, use cases becomes more complex, old team members dropped out and new team members joined, there were more cases where new feature got added to the project just to make it work. And gradually, every component will start depending on another, any change to one component has an undesired effect on other components. Even, some files resides in a undesired location, appearance of strange constructs of component, trying to force use cases into a component structure that is not at allÂ fitting.</p><p>Specially, in an Agile project, where the role of the architect might even be distributed, there is more possibility of facing these issues frequently.</p><p><strong>Solution</strong></p><p>For the above scenarios there are two solutions,</p><ol><li>Some experienced developers can look into the code once in a week or so, identifies the violations and fixÂ them</li><li>Introduce automated validation process</li></ol><p>With <strong>solution 1,</strong> there are couple of disadvantages, like, if there are less number of experienced developers, theyâ€™ll become the bottleneck to fix the violations. Also, this is a very time consuming process and they might feel overwhelmed with this new responsibility.</p><p><strong>Advantages of Automated validation</strong></p><p>With the automated validation process, couple of advantages comes withÂ it,</p><ol><li>There is no bottleneck dependencies on experienced developers.</li><li>As itâ€™s a automated process, we can integrate withÂ CI/CD</li><li>Less time consuming</li><li>When architecture rules evolves, itâ€™s much easier to find out which old component needs migration</li><li>Maintain healthy architecture quality</li><li>Common understanding between developers</li><li>New developers will have a much easier time to get acquainted with the code and get up to speed with the development process</li></ol><p>We saw there are lots of advantages with automated process, but the question is how can we automate this process? ðŸ¤” Here comes <a href="https://www.archunit.org/">ArchUnit</a> to save usÂ ðŸ˜Ž.</p><h3><strong>ArchUnit</strong></h3><p>ArchUnit is a free, simple and extensible library for checking the rchitecture of your Java code using any plain Java unit test framework. It can check dependencies between packages and classes, layers and slices, check for cyclic dependencies andÂ more.</p><h4><strong>Advantages</strong></h4><p>ArchUnit comes with the following advantages,</p><ol><li>Easy toÂ learn</li><li>Write tests in simpleÂ Java</li><li>Easily extensible</li><li>Has simple english likeÂ syntax</li><li>Write complex architecture checks withÂ ease</li><li>Out of the box support for <a href="https://junit.org/junit4/">Junit4</a> andÂ <a href="https://junit.org/junit5/">Junit5</a></li></ol><p>Even though it has the above advantages, unfortunately, it supports only Java language.</p><p>Now, letâ€™s check what are the things we can validate out of the box with ArchUnit.</p><ol><li><strong>Package Dependency Checks</strong></li></ol><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*4acfG7N5JiUKrk-osaWQAQ.png" /><figcaption>Source: <a href="https://www.archunit.org/userguide/html/000_Index.html#_package_dependency_checks">https://www.archunit.org/userguide/html/000_Index.html#_package_dependency_checks</a></figcaption></figure><p>2. <strong>Class Dependency Checks</strong></p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*UgwQO6y6neewUuRgcNEdNw.png" /><figcaption>Source: <a href="https://www.archunit.org/userguide/html/000_Index.html#_class_dependency_checks">https://www.archunit.org/userguide/html/000_Index.html#_class_dependency_checks</a></figcaption></figure><p>3. <strong>Class and Package Containment Checks</strong></p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*ODDNLB9dnEF0J-m-FvWoCw.png" /><figcaption>Source: <a href="https://www.archunit.org/userguide/html/000_Index.html#_class_and_package_containment_checks">https://www.archunit.org/userguide/html/000_Index.html#_class_and_package_containment_checks</a></figcaption></figure><p>4. <strong>Inheritance Checks</strong></p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*4DoMIGg67VmOneLg0Yoo0A.png" /><figcaption>Source: <a href="https://www.archunit.org/userguide/html/000_Index.html#_inheritance_checks">https://www.archunit.org/userguide/html/000_Index.html#_inheritance_checks</a></figcaption></figure><p>5. <strong>Annotation Checks</strong></p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*-NuiqOHOUj9yoLHAkqKgyA.png" /><figcaption>Source: <a href="https://www.archunit.org/userguide/html/000_Index.html#_annotation_checks">https://www.archunit.org/userguide/html/000_Index.html#_annotation_checks</a></figcaption></figure><p>6. <strong>LayerÂ Checks</strong></p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*HokM8Hi1jDjhjkN2p86tvg.png" /><figcaption>Source: <a href="https://www.archunit.org/userguide/html/000_Index.html#_layer_checks">https://www.archunit.org/userguide/html/000_Index.html#_layer_checks</a></figcaption></figure><p>7. <strong>CycleÂ Checks</strong></p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*Fk07FI6KjJQwdojxGFshJg.png" /><figcaption>Source: <a href="https://www.archunit.org/userguide/html/000_Index.html#_cycle_checks">https://www.archunit.org/userguide/html/000_Index.html#_cycle_checks</a></figcaption></figure><p>In above examples itâ€™s clear that we can validate complex architecture rules with ease using ArchUnit.</p><h3>Example</h3><p>Well, in the above section we got to know about the ArchUnit framework. In this section letâ€™s see some real lifeÂ example.</p><p>In my current project we are following the <a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_(software)">Hexagonal architecture</a> pattern. Due to this pattern our package designs looks like the following</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/646/1*q6cOzyj_cz6IJ_SxEDjtfw.png" /></figure><p>Hexagonal Architecture pattern is bit tricky for new joiners. We faced couple of <a href="https://medium.com/p/6f64d9a266c#7670">above mentioned challenges</a> using this architecture. To overcome those challenges, we have added the following testÂ cases</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/d7956a9dbdd3822d802f41ba61d16a97/href">https://medium.com/media/d7956a9dbdd3822d802f41ba61d16a97/href</a></iframe><p>These test cases are part of our build process. So, if anyone makes any code changes, theyâ€™ll get the quick feedback about the architecture design asÂ well.</p><h3><strong>Conclusion</strong></h3><p>I hope you are able to understand the concept of Architecture Fitness Test and advantages of having automated validation process for the same. Even though, I focused on ArchUnit framework which works only on Java, but I believe there are different libraries available in the market for different programming language, so you can use this concept in almost every language.</p><p>PS: I hope youâ€™ve enjoyed it, and if youâ€™ve found it useful, please feel free to share with others or leave a comment.Â ðŸ˜„</p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=6f64d9a266c" width="1" height="1" alt="">
